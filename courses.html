<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GATE Preparation Courses</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="Styles.css">
    <style>
        .glass-card {
            background: rgba(255,255,255,0.2);
            border-radius: 16px;
            box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.18);
        }
        .branch-icon {
            font-size: 2rem;
            margin-right: 0.5rem;
        }
        .bookmark {
            cursor: pointer;
            color: #f39c12;
        }
        .bookmark.inactive {
            color: #ccc;
        }
        .syllabus-link {
            text-decoration: none;
            color: #2980b9;
        }
        .syllabus-link:hover {
            text-decoration: underline;
        }
        .modal-backdrop {
            z-index: 1040 !important;
        }
        .modal-content {
            z-index: 1100 !important;
        }
        @media (max-width: 576px) {
            .branch-icon { font-size: 1.5rem; }
        }
        /* Fix: allow scrolling on the page */
        body {
            overflow: auto !important;
        }
    </style>
</head>
<body>
    <div class="background"></div>
    <div class="container py-5">
        <div class="row mb-4 align-items-center">
            <div class="col-12 col-md-4 mb-2 mb-md-0">
                <h2 class="text-white fw-bold"><i class="bi bi-mortarboard"></i> GATE Courses</h2>
            </div>
            <div class="col-12 col-md-5 mb-2 mb-md-0">
                <input id="searchBar" type="text" class="form-control" placeholder="Search by course title or topic...">
            </div>
            <div class="col-8 col-md-2">
                <select id="branchFilter" class="form-select">
                    <option value="ALL">All Branches</option>
                    <option value="CSE">CSE</option>
                    <option value="ECE">ECE</option>
                    <option value="ME">ME</option>
                    <option value="CE">CE</option>
                    <option value="EE">EE</option>
                    <option value="IN">IN</option>
                </select>
            </div>
            <div class="col-4 col-md-1 text-end">
                <button class="btn btn-light" data-bs-toggle="modal" data-bs-target="#addCourseModal"><i class="bi bi-plus-circle"></i> Add</button>
            </div>
        </div>
        <div id="coursesGrid" class="row g-4">
            <!-- Course cards will be injected here -->
        </div>
    </div>

    <!-- Add Course Modal -->
    <div class="modal fade" id="addCourseModal" tabindex="-1" aria-labelledby="addCourseModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content glass-card">
          <div class="modal-header">
            <h5 class="modal-title" id="addCourseModalLabel">Add New GATE Course</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <form id="addCourseForm">
            <div class="modal-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Course Title</label>
                        <input type="text" class="form-control" id="courseTitle" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Branch</label>
                        <select class="form-select" id="courseBranch" required>
                            <option value="">Select Branch</option>
                            <option value="CSE">CSE</option>
                            <option value="ECE">ECE</option>
                            <option value="ME">ME</option>
                            <option value="CE">CE</option>
                            <option value="EE">EE</option>
                            <option value="IN">IN</option>
                        </select>
                    </div>
                    <div class="col-12">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" id="courseDesc" rows="2" required></textarea>
                    </div>
                    <div class="col-12">
                        <label class="form-label">Topics Covered (comma separated)</label>
                        <input type="text" class="form-control" id="courseTopics" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Upload Syllabus (PDF)</label>
                        <input type="file" class="form-control" id="courseSyllabus" accept="application/pdf">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <button type="submit" class="btn btn-primary">Add Course</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
// Dummy dataset: 2+ courses per branch
const branchIcons = {
  CSE: '<i class="bi bi-laptop branch-icon"></i>',
  ECE: '<i class="bi bi-broadcast branch-icon"></i>',
  ME: '<i class="bi bi-gear branch-icon"></i>',
  CE: '<i class="bi bi-building branch-icon"></i>',
  EE: '<i class="bi bi-lightning-charge branch-icon"></i>',
  IN: '<i class="bi bi-speedometer2 branch-icon"></i>'
};

let courses = [
  // CSE
  {
    id: 'cse1',
    title: 'GATE 2026 - CSE Full Syllabus',
    branch: 'CSE',
    desc: 'Comprehensive Computer Science course for GATE 2026 aspirants.',
    topics: ['Algorithms', 'Data Structures', 'Operating Systems', 'DBMS', 'Theory of Computation'],
    syllabus: 'sample-cse1.pdf'
  },
  {
    id: 'cse2',
    title: 'GATE 2026 - CSE Crash Course',
    branch: 'CSE',
    desc: 'Fast-track revision for CSE GATE 2026.',
    topics: ['Programming', 'Networks', 'Compiler Design', 'Digital Logic'],
    syllabus: ''
  },
  // ECE
  {
    id: 'ece1',
    title: 'GATE 2026 - ECE Full Syllabus',
    branch: 'ECE',
    desc: 'Complete Electronics & Communication course for GATE.',
    topics: ['Signals', 'Networks', 'Analog Circuits', 'Digital Circuits', 'Control Systems'],
    syllabus: 'sample-ece1.pdf'
  },
  {
    id: 'ece2',
    title: 'GATE 2026 - ECE Practice Series',
    branch: 'ECE',
    desc: 'Practice questions and mock tests for ECE.',
    topics: ['Microprocessors', 'Communication', 'EMT', 'Electronic Devices'],
    syllabus: ''
  },
  // ME
  {
    id: 'me1',
    title: 'GATE 2026 - ME Full Syllabus',
    branch: 'ME',
    desc: 'Mechanical Engineering GATE 2026 preparation.',
    topics: ['Thermodynamics', 'Fluid Mechanics', 'Machine Design', 'Production'],
    syllabus: 'sample-me1.pdf'
  },
  {
    id: 'me2',
    title: 'GATE 2026 - ME Crash Course',
    branch: 'ME',
    desc: 'Quick revision for ME GATE 2026.',
    topics: ['Strength of Materials', 'Industrial Engineering', 'Heat Transfer'],
    syllabus: ''
  },
  // CE
  {
    id: 'ce1',
    title: 'GATE 2026 - CE Full Syllabus',
    branch: 'CE',
    desc: 'Civil Engineering complete GATE course.',
    topics: ['Structural Engineering', 'Geotechnical', 'Water Resources', 'Transportation'],
    syllabus: 'sample-ce1.pdf'
  },
  {
    id: 'ce2',
    title: 'GATE 2026 - CE Practice Series',
    branch: 'CE',
    desc: 'Practice and mock tests for Civil Engineering.',
    topics: ['Environmental', 'Surveying', 'Construction Materials'],
    syllabus: ''
  },
  // EE
  {
    id: 'ee1',
    title: 'GATE 2026 - EE Full Syllabus',
    branch: 'EE',
    desc: 'Electrical Engineering GATE 2026 preparation.',
    topics: ['Power Systems', 'Machines', 'Signals', 'Control Systems'],
    syllabus: 'sample-ee1.pdf'
  },
  {
    id: 'ee2',
    title: 'GATE 2026 - EE Crash Course',
    branch: 'EE',
    desc: 'Quick revision for EE GATE 2026.',
    topics: ['Power Electronics', 'Measurements', 'Analog Circuits'],
    syllabus: ''
  },
  // IN
  {
    id: 'in1',
    title: 'GATE 2026 - IN Full Syllabus',
    branch: 'IN',
    desc: 'Instrumentation Engineering GATE 2026 course.',
    topics: ['Transducers', 'Analog Electronics', 'Digital Electronics', 'Control Systems'],
    syllabus: 'sample-in1.pdf'
  },
  {
    id: 'in2',
    title: 'GATE 2026 - IN Practice Series',
    branch: 'IN',
    desc: 'Practice and mock tests for IN.',
    topics: ['Sensors', 'Process Control', 'Measurements'],
    syllabus: ''
  }
];

// Bookmark persistence
function getBookmarks() {
  return JSON.parse(localStorage.getItem('bookmarkedCourses') || '[]');
}
function setBookmarks(arr) {
  localStorage.setItem('bookmarkedCourses', JSON.stringify(arr));
}

function renderCourses() {
  const grid = document.getElementById('coursesGrid');
  const branch = document.getElementById('branchFilter').value;
  const search = document.getElementById('searchBar').value.trim().toLowerCase();
  const bookmarks = getBookmarks();
  let filtered = courses.filter(c => (branch === 'ALL' || c.branch === branch));
  if (search) {
    filtered = filtered.filter(c =>
      c.title.toLowerCase().includes(search) ||
      c.topics.some(t => t.toLowerCase().includes(search))
    );
  }
  grid.innerHTML = '';
  if (filtered.length === 0) {
    grid.innerHTML = '<div class="col-12 text-center text-white">No courses found.</div>';
    return;
  }
  filtered.forEach(course => {
    const isBookmarked = bookmarks.includes(course.id);
    const topicsList = course.topics.map(t => `<span class='badge bg-info text-dark me-1 mb-1'>${t}</span>`).join(' ');
    const syllabusSection = course.syllabus ?
      `<a class="syllabus-link" href="${course.syllabus}" target="_blank"><i class="bi bi-file-earmark-pdf"></i> Download PDF</a>` :
      '<span class="text-muted">No PDF</span>';
    grid.innerHTML += `
      <div class="col-12 col-md-6 col-lg-4">
        <div class="card glass-card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <div class="d-flex align-items-center mb-2">
              ${branchIcons[course.branch] || ''}
              <h5 class="card-title mb-0 flex-grow-1">${course.title}</h5>
              <i class="bi bi-bookmark${isBookmarked ? '-fill' : ''} bookmark${isBookmarked ? '' : ' inactive'} ms-2" title="Bookmark" onclick="toggleBookmark('${course.id}')"></i>
            </div>
            <div class="mb-2 text-secondary">${course.desc}</div>
            <div class="mb-2">${topicsList}</div>
            <div>
              <button class="btn btn-sm btn-outline-primary mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#syllabus-${course.id}">
                <i class="bi bi-journal-text"></i> Syllabus
              </button>
              <div class="collapse" id="syllabus-${course.id}">
                <div class="card card-body glass-card p-2 mt-2">
                  ${syllabusSection}
                </div>
              </div>
            </div>
            <div class="mt-auto d-flex justify-content-end align-items-center">
              <button class="btn btn-success btn-sm">Enroll / Start Now</button>
            </div>
          </div>
        </div>
      </div>
    `;
  });
}

function toggleBookmark(id) {
  let bookmarks = getBookmarks();
  if (bookmarks.includes(id)) {
    bookmarks = bookmarks.filter(b => b !== id);
  } else {
    bookmarks.push(id);
  }
  setBookmarks(bookmarks);
  renderCourses();
}

document.getElementById('branchFilter').addEventListener('change', renderCourses);
document.getElementById('searchBar').addEventListener('input', renderCourses);
// Add Enter key support for search bar
document.getElementById('searchBar').addEventListener('keydown', function(e) {
  if (e.key === 'Enter') {
    e.preventDefault();
    renderCourses();
  }
});

// Add Course
const addCourseForm = document.getElementById('addCourseForm');
addCourseForm.addEventListener('submit', function(e) {
  e.preventDefault();
  const title = document.getElementById('courseTitle').value.trim();
  const branch = document.getElementById('courseBranch').value;
  const desc = document.getElementById('courseDesc').value.trim();
  const topics = document.getElementById('courseTopics').value.split(',').map(t => t.trim()).filter(Boolean);
  const syllabusFile = document.getElementById('courseSyllabus').files[0];
  let syllabus = '';
  if (syllabusFile) {
    syllabus = URL.createObjectURL(syllabusFile);
  }
  const id = branch.toLowerCase() + Math.random().toString(36).substr(2,5);
  courses.push({ id, title, branch, desc, topics, syllabus });
  addCourseForm.reset();
  const modal = bootstrap.Modal.getInstance(document.getElementById('addCourseModal'));
  modal.hide();
  renderCourses();
});

// Initial render
renderCourses();
    </script>
</body>
</html>